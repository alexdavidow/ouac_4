function updateQuantity(e){
  e.preventDefault();
  params = {
      id: $(this).parent().parent().parent().attr('id'),
      quantity: $(this).siblings("input[name='quantity']").val()
  }

  $.ajax({
    type: 'PUT',
    url: '/product_orders/' + params['id'],
    data: params,
    success: function(){
      console.log('UPDATED SUCCESSFULLY!');
      newDiv = $('<div>').addClass('notice');
      newDiv.text('You have successfully updated your cart.');
      newDiv.appendTo('#container');
      newDiv.fadeOut(12000);
      newDiv.remove();
      $('#order-total').text(<%= @order.order_sum %>);
    },
    error: function(){
      newDiv = $('<div>').addClass('error');
      newDiv.text('There was a problem updating your cart.');
      newDiv.appendTo('#container');
      newDiv.fadeOut(12000);
      newDiv.remove();
    }
  })
}



$(function(){
 $(".orders input[name='commit']").on('click', updateQuantity); 
});
